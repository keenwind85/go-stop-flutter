# 온라인 맞고 게임 규칙서 (Project: Soon-si-mi Matgo)

## 1. 게임 준비 (Game Setup)
### 1.1 참여 인원
- **플레이어:** 2명 (선공: 방장 혹은 이전 게임 승자)
- **덱 구성:** 화투패 48장 + 보너스 피 2장 (총 50장)
- 50장의 카드는 @assets/cards 에 아래와 같이 저장되어 있음
- 01월 부터 12월 까지의 기본 카드 각 4장씩 총 48장
- 보너스 카드 2장 (*보너스 카드는 쌍피로 점수 계산함*)
- 카드 뒷면 이미지 1장 

### 1.2 패 나누기 (Dealing)
- **손패 (Hand):** 각 10장
- **바닥패 (Floor):** 8장 (오픈된 상태)
- **더미 (Deck):** 나머지 패는 중앙에 뒤집어 놓음

### 1.3 총통 (Instant Win)
- **조건:** 시작 시 손패에 같은 월(Month)의 패가 4장 모두 들어온 경우.
- **결과:** 해당 플레이어의 즉시 승리. (점수 10점, 룰에 따라 협의 가능)
- **예외:** 두 플레이어 모두 총통일 경우 '나가리(무승부)' 처리.

### 1.4 보너스 패 처리
- 바닥에 보너스 패가 깔리면 선공(방장)이 즉시 가져가고, 더미에서 새 카드를 꺼내 빈 자리를 채운다.

---

## 2. 게임 진행 (Gameplay Loop)
내 턴(Turn)은 다음 순서로 진행되며, 모든 결과는 즉시 처리된다.

### 2.1 1단계: 패 내기 (Play Card)
- 손에서 패를 1장 골라 바닥에 낸다.
- **매칭 로직:**
  - **맞는 월 없음:** 바닥에 제출.
  - **1장 맞음:** 낸 패와 바닥 패를 묶어서 획득(Capture).
  - **2장 맞음:** 선택권 발생. 플레이어가 획득할 바닥 패 1장을 선택.
  - **3장 맞음 (일명 '설사'):** 바닥의 3장을 모두 가져옴. (상대방 피 1장 뺏어옴)
  * 바닥의 3장이 같은 월일 경우 3장의 패는 한번에 가져올 수 있도록 겹쳐진 상태로 있어야함.

### 2.2 2단계: 뒤집기 (Flip Deck)
- 중앙 더미에서 패를 1장 뒤집는다.
- **매칭 로직:** 1단계와 동일하게 적용.

### 2.3 특수 룰 (Special Events)
이벤트 발생 시 아래 이름을 포함한 특수를 UI 이펙트 및 피 뺏기 로직이 수행된다.

- **뻑 (Puk):** (낸 패 + 바닥 패)가 맞았는데, (뒤집은 패)도 같은 월인 경우.
  - 결과: 3장을 모두 바닥에 두고 턴 종료. 점수 없음. (나중에 먹으면 피 뺏기 효과)
  - 자뻑: 자신이 싼 뻑을 자신이 먹으면 피 2장을 뺏어옴.
- **따닥 (Ttadak):** (낸 패가 바닥과 맞음) AND (뒤집은 패도 바닥의 다른 패와 맞음).
  - 결과: 2쌍을 모두 가져감 + 상대방 피 1장 뺏어옴.
- **쪽 (Kiss):** (낸 패가 안 맞음) BUT (뒤집은 패가 낸 패와 맞음).
  - 결과: 2장을 가져감 + 상대방 피 1장 뺏어옴.
- **싹쓸이 (Sweep):** 턴 종료 시 바닥에 남은 패가 하나도 없을 때.
  - 결과: 상대방 피 1장 뺏어옴.

### 2.4 흔들기 / 폭탄 (Shaking / Bomb)
이벤트 발생 시 아래 이름을 포함한 UI 이펙트 및 피 뺏기 로직이 수행된다.

- **흔들기:** 손에 같은 월 3장이 있을 때 사용할 수 있음. (흔들기로 사용한 3장의 카드는 상대방에게 공개되며, 승리 시 점수 2배)
- **폭탄:** 바닥에 같은 월 1장이 있고, 손에 3장이 있을 때 3장을 한 번에 냄.
  - 효과: 바닥 패를 먹고 + 상대방 피 1장 뺏어옴 + 승리 시 점수 2배.

---

## 3. 점수 계산 (Scoring)
점수는 실시간으로 집계된다.

### 3.1 족보 및 점수
- **광 (Gwang):**
  - 3광 (비광 제외): 3점
  - 비3광 (비광 포함): 2점
  - 4광: 4점
  - 5광: 15점
- **열끗 (Animal):** 7장 이상부터 1점씩 추가. (고도리: 5점)
- **띠 (Ribbon):** 5장 이상부터 1점씩 추가. (홍단/청단/초단: 각 3점)
- **피 (Pi):** 10장 이상부터 1점씩 추가.
  - 쌍피, 보너스 패: 피 2장으로 계산.

### 3.2 고 / 스톱 (Go / Stop)
- **조건:** 총 점수가 **7점** 이상이 된 순간 결정 가능.
- **Go:** 게임 계속 진행. (+1점 추가, 이후 1점씩 누적)
- **Stop:** 게임 즉시 종료. 현재 플레이어 승리.

---

## 4. 종료 및 배수 (End Game & Multiplier)
최종 점수는 `기본 점수 x 배수`로 계산된다.

### 4.1 고 배수
- **1고 / 2고:** +1점 / +2점 (배수 아님, 단순 합산)
- **3고:** 총 점수 x 2배
- **4고:** 총 점수 x 4배
- **5고:** 총 점수 x 8배 (5고 이후의 추가 고(6고, 7고 등)가 등 가 발생할 경우에는 모두 총 점수 x 8배로 처리)

### 4.2 박 (Penalty Rules) - 승자의 점수에 곱함
- **광박:** 승자가 광으로 점수가 났는데, 패자가 광이 하나도 없을 때. (x2)
- **피박:** 승자가 피로 점수가 났는데, 패자의 피가 5장 이하일 때. (x2)
- **고박 (독박):** 상대가 '고'를 했는데 내가 역전해서 '스톱'한 경우.
  - 결과: 원래 패자가 내야 할 돈까지 '고'를 불렀던 사람이 모두 독박 씀.

### 4.3 나가리 (Draw)
- 양쪽 모두 득점 없이 패가 소진되거나, 7점 이상이어도 스톱을 안 하고 끝까지 간 경우.
- 결과: 승자 없음. 다음 판 점수 2배 적용.